<html>
  <head>
    <script src="socket.io.js"></script>
    <script>
      const socket = io('http://localhost:3001/chats', {
          query: {
              token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjlmMDIwNWE2LTU4OWMtNGZjYi05MjMzLTNlNjE0NjMzYTdjZSIsImlhdCI6MTYxNDUzODAxNywiZXhwIjoxNjE0NTQxNjE3fQ.U-cKoi1Yi9tFI6JEzYOcm3t903Gbe-VP2H7Y6W8YRvg'
          }
      });
      socket.on('connect', function() {
        console.log('Connected');

        // socket.emit('events', { test: 'test' });
        // socket.emit('identity', 0, response =>
        //   console.log('Identity:', response),
        // );
        socket.emit('join', { subtopicId: "2bc3a20f-0721-4938-89d1-8e1487f264f8"})
        socket.emit('message', { content: "replying", subtopicId: "2bc3a20f-0721-4938-89d1-8e1487f264f8", replyTo: "33670284-3690-497c-80ee-02a262eb7a08" })
      });
      socket.on('message', (data) => {
          console.log(data)
      })
      socket.on('events', function(data) {
        console.log('event', data);
      });
      socket.on('error', function(data) {
        console.log('event', data);
      });
      socket.on('exception', function(data) {
        console.log('event', data);
      });
      socket.on('disconnect', function() {
        console.log('Disconnected');
      });
    </script>
  </head>

  <body></body>
</html>
